Diagramme de classes UML:

Class Cinéma
-idCinema: int
-nom: String
-adresse: String

Class Séance
-idSéance: int
-idCinema: int
-idFilm: int
-heure: DateTime

Class Film
-idFilm: int
-nom: String
-durée: int

Class Place
-idPlace: int
-idSéance: int
-numéro: int
-état: String

Class Tarif
-idTarif: int
-nom: String
-prix: float

Class Réservation
-idRéservation: int
-idPlace: int
-idTarif: int

*****

CREATE DATABASE cinema;

USE cinema;

CREATE TABLE Cinéma (
idCinema int PRIMARY KEY NOT NULL AUTO_INCREMENT,
nom varchar(255) NOT NULL,
adresse varchar(255) NOT NULL
);

CREATE TABLE Séance (
idSéance int PRIMARY KEY NOT NULL AUTO_INCREMENT,
idCinema int NOT NULL,
idFilm int NOT NULL,
heure datetime NOT NULL,
FOREIGN KEY (idCinema) REFERENCES Cinéma (idCinema),
FOREIGN KEY (idFilm) REFERENCES Film (idFilm)
);

CREATE TABLE Film (
idFilm int PRIMARY KEY NOT NULL AUTO_INCREMENT,
nom varchar(255) NOT NULL,
durée int NOT NULL
);

CREATE TABLE Place (
idPlace int PRIMARY KEY NOT NULL AUTO_INCREMENT,
idSéance int NOT NULL,
numéro int NOT NULL,
état varchar(255) NOT NULL,
FOREIGN KEY (idSéance) REFERENCES Séance (idSéance)
);

CREATE TABLE Tarif (
idTarif int PRIMARY KEY NOT NULL AUTO_INCREMENT,
nom varchar(255) NOT NULL,
prix float NOT NULL
);

CREATE TABLE Réservation (
idRéservation int PRIMARY KEY NOT NULL AUTO_INCREMENT,
idPlace int NOT NULL,
idTarif int NOT NULL,
FOREIGN KEY (idPlace) REFERENCES Place (idPlace),
FOREIGN KEY (idTarif) REFERENCES Tarif (idTarif)
);

*****

ALTER TABLE Séance
ADD CONSTRAINT séance_cinema_fk
FOREIGN KEY (idCinema)
REFERENCES Cinéma (idCinema);

ALTER TABLE Séance
ADD CONSTRAINT séance_film_fk
FOREIGN KEY (idFilm)
REFERENCES Film (idFilm);

ALTER TABLE Place
ADD CONSTRAINT place_séance_fk
FOREIGN KEY (idSéance)
REFERENCES Séance (idSéance);

ALTER TABLE Place
ADD CONSTRAINT place_utilisateur_fk
FOREIGN KEY (idUtilisateur)
REFERENCES Utilisateur (idUtilisateur);

